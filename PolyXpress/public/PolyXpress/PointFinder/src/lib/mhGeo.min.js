/*! PointFinder 12-04-2014 */
function getGlobalContainer(){var a;return"undefined"!=typeof module?a=module:"undefined"!=typeof window&&(window.exports=window.exports||{},a=window),a}!function(a){a.exports=function(){"use strict";function a(a,c){d.log(d.LEVEL.DEBUG,"__locationEventHandler: lat = "+c.coords.latitude+" lng = "+c.coords.longitude),c.coords.accuracy<h?(b(c),a(c)):(d.log(d.LEVEL.PRODUCTION,"Geolocation Watch:  Dropping inaccurate point ("+c.coords.accuracy+")."),k+=20,k>500&&(k=500))}function b(a){k=k*i+(1-i)*a.coords.accuracy}function c(a){var b={0:"Unknown error",1:"Permission denied by user",2:"Position is not available",3:"Request timed out"},c=b[a.code];(0===a.code||2===a.code)&&(c=c+" "+a.message),d.log(d.LEVEL.PRODUCTION,"MAP ERROR:  "+c)}var d=require("/src/lib/mhlog.js")();d.setLoggingLevel(d.LEVEL.DEBUG);var e={};e.test={};var f,g={timeout:3e4,enableHighAccuracy:!0,maximumAge:0},h=300,i=.2,j=null,k=100,l=0;return e.startWatch=function(b,e){d.log(d.LEVEL.DEBUG,"startWatch: called");var h;navigator.geolocation.getCurrentPosition(b,c,g),null===j?(d.log(d.LEVEL.DEBUG,"startWatch: watchPosition called."+j),f=null,k=100,l=0,h=a.bind(this,e),j=navigator.geolocation.watchPosition(h,c,g)):d.log(d.LEVEL.PRODUCTION,"startWatch Error: watchPosition already called")},e.stopWatch=function(){d.log(d.LEVEL.DEBUG,"stopWatch: watchPointId: "+j+" geoOptions = "+JSON.stringify(g)),j&&(d.log(d.LEVEL.DEBUG,"stopWatch: aa = "+e.getAverageAccuracy()),navigator.geolocation.clearWatch(j),j=null)},e.getAverageAccuracy=function(){return k},e.setMinAccuracy=function(a){h=a},e}}(getGlobalContainer());