/*! PointFinder 28-06-2014 */
module.exports=function(){"use strict";function a(){var a=function(){console.log("Fake InitMap Called.")};p.startWatch(a,n),u.disabled=!0,v.disabled=!0,w.disabled=!1,s.disabled=!0,t.disabled=!1}function b(){p.stopWatch(),u.disabled=!1,v.disabled=!0,w.disabled=!0,s.disabled=!1,t.disabled=!0}function c(){p.stopWatch(),u.disabled=!1,v.disabled=!0,w.disabled=!0,s.disabled=!1,t.disabled=!0;var a=document.getElementById("pointNote"),b=document.createElement("li");b.innerHTML="Average over "+z.count+" runs<br/>",b.innerHTML+="Lat: "+z.latSum/z.count+", Long: "+z.longSum/z.count,b.innerHTML+=", Accuracy: "+z.accSum/z.count,b.innerHTML+="<br/>Note: "+a.value;var c=document.getElementById("pointList");c.appendChild(b),z.accSum=0,z.latSum=0,z.longSum=0,z.count=0}function d(){var a=function(){console.log("Fake InitMap called.")};q.startWatch(a,l),u.disabled=!0,v.disabled=!1,w.disabled=!0,s.disabled=!0,t.disabled=!0}function e(){q.stopWatch(),u.disabled=!1,v.disabled=!0,w.disabled=!0,s.disabled=!1,t.disabled=!0,m();var a=document.getElementById("testDisplay");a.innerHTML="Average Accuracy: "+z.accSum/z.count,a.innerHTML+="<br/>Sample Size: "+z.count,z.accSum=0,z.latSum=0,z.longSum=0,z.count=0}function f(){var a=document.getElementById("timeout");A.timeout=a.value}function g(){var a=document.getElementById("maximumAge");A.maximumAge=a.value}function h(){document.getElementById("highAccuracy");A.enableHighAccuracy=!A.enableHighAccuracy}function i(a){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),c={zoom:15,center:b,mapTypeId:google.maps.MapTypeId.ROADMAP};google.maps.visualRefresh=!0;var d=document.getElementById("mapview");x=new google.maps.Map(d,c),j(x,b,"Your Location","Latitude = "+a.coords.latitude+", Longitude = "+a.coords.longitude)}function j(a,b,c,d){var e={position:b,map:a,title:c,clickable:!0};y=new google.maps.Marker(e);var f={content:d,position:b},g=new google.maps.InfoWindow(f);google.maps.event.addListener(y,"click",function(){g.open(a)})}function k(a){var b=new google.maps.LatLng(a.latitude,a.longitude);x.panTo(b),y.setPosition(b)}function l(a){var b=a.coords.latitude,c=a.coords.longitude,d=a.coords.accuracy,e=document.getElementById("progress");e.innerHTML+=".",z.count++,z.accSum+=d,z.latSum+=b,z.longSum+=c}function m(){var a=document.getElementById("progress");a.innerHTML="Progress:  "}function n(a){var b=a.coords.latitude,c=a.coords.longitude,d=document.getElementById("pointDisplay");d.innerHTML="You are at Latitude: "+b+", Longitude: "+c;var e=a.coords.accuracy,f=document.getElementById("accuracyDisplay");f.innerHTML="Presently, accuracy is "+e+" meters",z.count++,z.accSum+=e,z.latSum+=b,z.longSum+=c,k(a.coords)}var o=require("src/lib/mhLog/mhlog.js")(),p=require("src/lib/mhGeo/mhGeo.js")(),q=require("src/lib/mhGeo/mhGeo.js")(),r={};r.test={};var s,t,u,v,w,x,y,z={latSum:0,longSum:0,accSum:0,count:0},A={maximumAge:0,enableHighAccuracy:!0,timeout:1/0};return r.setup=function(){o.log(o.LEVEL.DEBUG,"in pfGPS.setup()...");var j=document.getElementById("timeout");j&&(j.onchange=f);var k=document.getElementById("maximumAge");k&&(k.onchange=g);var l=document.getElementById("highAccuracy");l&&(l.onclick=h),s=document.getElementById("startTracking"),s&&(s.onclick=a),t=document.getElementById("stopTracking"),t&&(t.onclick=b,t.disabled=!0),u=document.getElementById("watch"),u&&(u.onclick=d),v=document.getElementById("clearWatch"),v&&(v.onclick=e,v.disabled=!0),w=document.getElementById("addPoint"),w&&(w.onclick=c,w.disabled=!0),navigator.geolocation.getCurrentPosition(i)},r}();