/*! pePlayer 21-11-2014 */
function getGlobalContainer(){var a;return"undefined"!=typeof module?a=module:"undefined"!=typeof window&&(window.exports=window.exports||{},a=window),a}!function(a){var b={};b.test={},a.exports=function(a,c,d){"use strict";function e(b){var d=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);m.updateLocation(d);var e=c.findStoryByID(a.getCurrentStoryID());m.createMapView(e.chapterList,"map_canvas","http://google.com/mapfiles/ms/micons/man.png",c.findChapterByID,"http://maps.google.com/mapfiles/kml/pal4/icon0.png")}function f(b){var d=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);n.updateLocation(d);var e=c.findChapterByID(a.getCurrentChapterID());n.createMapView(e.eventList,"map_canvas2","http://google.com/mapfiles/ms/micons/man.png",c.findEventByID,"http://maps.google.com/mapfiles/kml/pal3/icon54.png")}function g(b){var c=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);m.updateLocation(c),a.updateChapterLocation(c)}function h(b){var c=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);a.updateGPSIndicator(k.getAverageAccuracy()),n.updateLocation(c),a.updateEventLocation(c)}var i=d.mhLog,j=require("src/lib/mhGeo/mhGeo")(i),k=require("src/lib/mhGeo/mhGeo")(i),l=require("src/js/pePlayerMapFactory")(d),m=l.makeMap(),n=l.makeMap();return j.setMinAccuracy(5e4),k.setMinAccuracy(5e4),$(document).on("pageshow","#mapViewChapters",function(){i.log(i.LEVEL.DEBUG,"PageShow:  mapViewChapters"),j.startWatch(e,g),google.maps.event.trigger(map_canvas,"resize")}),$(document).on("pagehide","#mapViewChapters",function(){i.log(i.LEVEL.DEBUG,"PageHide:  mapViewChapters"),j.stopWatch()}),$(document).on("pageshow","#mapViewEvents",function(){i.log(i.LEVEL.DEBUG,"PageShow:  mapViewEvents"),k.startWatch(f,h),google.maps.event.trigger(map_canvas2,"resize")}),$(document).on("pagehide","#mapViewEvents",function(){i.log(i.LEVEL.DEBUG,"PageHide:  mapViewEvents"),k.stopWatch()}),b.mapViewChaptersYourLocation=function(){m.panToYou()},b.mapViewChaptersChapterLocation=function(){m.panToMarkers()},b.mapViewEventsYourLocation=function(){n.panToYou()},b.mapViewEventsEventLocation=function(){n.panToMarkers()},b.eventInRange=function(a){return n.itemInRange(a)},b.chapterInRange=function(a){return m.itemInRange(a)},b.getDistanceFromEvent=function(a){return n.getDistanceFromItem(a)},b.getDistanceFromChapter=function(a){return m.getDistanceFromItem(a)},b}}(getGlobalContainer());